{{#
    @name Image gallery
    @desc Image gallery section block
    @set page.page_builder.image_gallery_block
#}}

{{# Set vars for gallery #}}
{{ gallery = id }}
{{ width_c4 = (({ configuration.max_width } / 12) * 4) - 2 * { configuration.gutters_md } }}
{{ width_c5 = (({ configuration.max_width } / 12) * 5) - 2 * { configuration.gutters_md } }}
{{ width_c7 = (({ configuration.max_width } / 12) * 7) - 2 * { configuration.gutters_md } }}

{{# initialize lightbox for this gallery #}}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        initializeLightbox('.glightbox-{{ id }}');
      });
</script>

{{# Mobile style #}}
{{ if collapse_settings.settings_padding_bottom_m || collapse_settings.settings_padding_top_m }}
<style>
    @media screen and (max-width: 760px){
    {{ if collapse_settings.settings_padding_bottom_m }}
        .block--{{ id }} {
            padding-bottom: {{ collapse_settings.settings_padding_bottom_m | rem}}rem !important;
        }
    {{ /if }}
    {{ if collapse_settings.settings_padding_top_m }}
        .block--{{ id }} {
            padding-top: {{ collapse_settings.settings_padding_top_m | rem}}rem !important;
        }
    {{ /if }}
    }
</style>
{{ /if }}

{{# HTML #}}
<div {{ if collapse_settings.custom_id }}id="{{ collapse_settings.custom_id }}"{{ /if }}
class="block block--gallery block--{{ id }} {{ collapse_settings:custom_class }}
 {{ if collapse_settings.achtegrond_gradient !== 'null' }}{{ collapse_settings.achtergrond_gradient }}{{ /if }}"
    style="{{ if collapse_settings:settings_bg_color }}background-color:{{ collapse_settings:settings_bg_color }};{{ /if }}
    {{ if collapse_settings:settings_padding_top }}padding-top:{{ collapse_settings:settings_padding_top | rem }}rem;{{ /if }}
    {{ if collapse_settings:settings_padding_bottom }}padding-bottom:{{ collapse_settings:settings_padding_bottom | rem }}rem;{{ /if }}
">
    <div class="container">
        <div class="row">
            <div class="
                c12-xs
                cos0-xs
                c{{collapse_layout:width_all_column}}-md
                c{{collapse_layout:width_all_column}}-sm
                cos{{collapse_layout:offset_all_column}}-md
                cos{{collapse_layout:offset_all_column}}-sm
            ">

                <div class="row gallery">
                    {{ images_highlight }}
                        {{# FLIPPED #}}
                        {{ if is_flipped }}
                            {{ if index === 0 }}
                                <div class="c5-xs c5-sm c5-md gallery__item">
                                    <div class="inner">
                                        <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                            <picture>
                                                <source srcset="{{ glide :src="url" format="webp"  fit="crop_focal" :width="width_c5" :height="image_height_first"}}" type="image/webp">
                                                <img class="img gallery__image" src="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c5" :height="image_height_first" }}" alt="{{ alt }}">
                                            </picture>
                                        </a>
                                    </div>
                                </div>
                            {{ /if }}
                            {{ if index === 1 }}
                                <div class="c7-xs c7-sm c7-md gallery__item">
                                    <div class="inner">
                                        <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                            <picture>
                                                <source srcset="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c7" :height="image_height_first" }}" type="image/webp">
                                                <img class="img gallery__image" src="{{ glide :src="url" format="webp"  fit="crop_focal" :width="width_c7" :height="image_height_first"}}" alt="{{ alt }}">
                                            </picture>
                                        </a>
                                    </div>
                                </div>
                            {{ /if }}
                        {{# NORMAL #}}
                        {{ else }}
                            {{ if index === 0 }}
                                <div class="c7-xs c7-sm c7-md gallery__item">
                                    <div class="inner">
                                        <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                            <picture>
                                                <source srcset="{{ glide :src="url" format="webp"  fit="crop_focal" :width="width_c7" :height="image_height_first"}}" type="image/webp">
                                                <img class="img gallery__image" src="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c7" :height="image_height_first" }}" alt="{{ alt }}">
                                            </picture>
                                        </a>
                                    </div>
                                </div>
                            {{ /if }}
                            {{ if index === 1 }}
                                <div class="c5-xs c5-sm c5-md gallery__item">
                                    <div class="inner">
                                        <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                            <picture>
                                                <source srcset="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c5" :height="image_height_first" }}" type="image/webp">
                                                <img class="img gallery__image" src="{{ glide :src="url" format="webp"  fit="crop_focal" :width="width_c5" :height="image_height_first"}}" alt="{{ alt }}">
                                            </picture>
                                        </a>
                                    </div>
                                </div>
                            {{ /if }}
                        {{ /if }}
                        {{ if index === 2 }}
                            <div class="c4-xs c4-sm c4-md gallery__item">
                                <div class="inner">
                                    <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                        <picture>
                                            <source srcset="{{ glide :src="url" format="webp"  fit="crop_focal" :width="width_c4" :height="image_height_second" }}" type="image/webp">
                                            <img class="img gallery__image" src="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c4" :height="image_height_second" }}" alt="{{ alt }}">
                                        </picture>
                                    </a>
                                </div>
                            </div>
                        {{ /if }}
                        {{ if index === 3 }}
                            <div class="c4-xs c4-sm c4-md gallery__item">
                                <div class="inner">
                                    <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                        <picture>
                                            <source srcset="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c4" :height="image_height_second" }}" type="image/webp">
                                            <img class="img gallery__image" src="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c4" :height="image_height_second" }}" alt="{{ alt }}">
                                        </picture>
                                    </a>
                                </div>
                            </div>
                        {{ /if }}
                        {{ if index === 4 }}
                            <div class="c4-xs c4-sm c4-md gallery__item">
                                <div class="inner">
                                    <a href="{{ url }}" class="gallery__link glightbox-{{ gallery }}">
                                        <picture>
                                            <source srcset="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c4" :height="image_height_second" }}" type="image/webp">
                                            <img class="img gallery__image" src="{{ glide :src="url" format="webp" fit="crop_focal" :width="width_c4" :height="image_height_second" }}" alt="{{ alt }}">
                                        </picture>
                                    </a>
                                </div>
                            </div>
                        {{ /if }}
                    {{ /images_highlight }}
                    {{ if images_all }}
                        <div class="hidden">
                            {{ images_all }}
                                <a href="{{ url }}" aria-hidden="true" class="hidden glightbox-{{ gallery }}"></a>
                            {{ /images_all }}
                        </div>
                    {{ /if }}
                </div>

            </div>
        </div>
    </div>
</div>
